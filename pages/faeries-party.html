<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Void Lee</title>
</head>

<body>
    <div id="overlay" onClick="finishText()">

        <div class="story" style="background-image: url(../resources/images/backgrounds/new-game.png);" id="story">
            <div class="fade text" id="delayedMessage" style="visibility:hidden;">
                <a class="choice-button" onClick="redirect('party-hongatar.html')">Party</a>
            </div>
        </div>
        <div id="custom-alert" class="snackbar">
            <p id="alert-message"></p>
        </div>
    </div>

    <script src="../script.js"></script>
    <script>
        window.onload = function () {
            fadeInOverlay();
            buildSidebar();
            const params = new URLSearchParams(window.location.search);
            const choice = params.get('choice');

            let text = ''

            switch (choice) {
                case 'bow':
                    updatePartyStatus('magic nosehairs');
                    text = `The {hongatar} seem giddy at your gracious display and you can feel your nosehairs tingling.`
                    break;
                case 'lesson':
                    updatePartyStatus('god of the forest');
                    text = 'The {hongatar} nod solemnly. After a moment of quiet reflection, they all begin to extol the virtues of not littering.'
                    break;
                case 'thanks':
                    updatePartyStatus('butt of the joke');
                    text = `"Thanks!".."\`Thanks!\`".."tHaNkS!!" The {hongatar} are mocking you ruthlessly in what you tell yourself is all in good fun.`
                    break;
                case 'wink':
                    updatePartyStatus('sexy god of the forest');
                    text = 'This excites the {hongatar} very much. They start to flip and spin and shout and yip.'
                    break;
                case 'flatter':
                    updatePartyStatus('one with the hongatar');
                    text = `The {hongatar} blush simultaneously. What you said has them all a-titter!`
                    break;
                case 'insult':
                    updatePartyStatus(`nobody's friend`);
                    text = `"\`tHaT's ThE sTuPiDeSt ThInG i'Ve EvEr HeArD!\`" The {hongatar} are mocking you ruthlessly, totally unfazed by your shallow insult.`
                    break;
                case 'accuse':
                    updatePartyStatus('boy who cried wolf');
                    text = `The {hongatar} dismiss you summarily. You simply don't have the proof to back your accusations.`
                    break;
            }

            createNarrative(
                `${text} Their excited chattering finds a rhythmic unison in a sing-song chant.`,
            );
            playText(onEnd => {
                createDialog('long', 'faerie1', `~HONGATAR #1~^^We're going to a party!`, onClick => {
                    dismissDialog('long');
                    createDialog('long', 'faerie2', `~HONGATAR #2~^^We're going to a party!`, onClick => {
                        dismissDialog('long');
                        createDialog('long', 'faerie1', `~HONGATAR #1~^^We want to sing and drink and eat!`, onClick => {
                            dismissDialog('long');
                            createDialog('long', 'faerie3', `~HONGATAR #3~^^A party is the thing we need!`, onClick => {
                                dismissDialog('long');
                                createDialog('long', 'faerie2', `~HONGATAR #2~^^Heed the call!`, onClick => {
                                    dismissDialog('long');
                                    createDialog('long', 'faerie1', `~HONGATAR #2~^^Come one, come all!`, onClick => {
                                        dismissDialog('long');
                                        createDialog('long', 'faerie3', `~HONGATAR #3~^^We're going to a party!`, onClick => {
                                            dismissDialog('long');
                                            createDialog('long', 'faerie1', `~HONGATAR #2~^^We're going to a party!`, onClick => {
                                                dismissDialog('long');
                                                dismissDialog(null, true);
                                                createNarrative(`The {hongatar} with the coolest outfit addresses you.`)
                                                playText(onEnd => {
                                                    createDialog('long', 'faerie2', `~HONGATAR #2~^^Wow, a human that understands Fairy etiquette, how amusing, how rare! What a find! Will you join us? We are headed to a Leak Party.`, onClick => {
                                                        dismissDialog('long');
                                                        dismissDialog(null, true);
                                                        createNarrative(
                                                            `Without warning, the hongatar bombard you with faerie dust. You feel sleepy. You feel strange. You're already asleep, you're already dreaming, but now you really feel like you're dreaming.`
                                                        );
                                                        playText(onEnd => {
                                                            showBottomChoices();
                                                        });
                                                    });
                                                    playText(null, null, 'long');
                                                }, `toggleSidebar('id', 'hongatar')`);
                                            });
                                            playText(null, null, 'long');
                                        });
                                        playText(null, null, 'long');
                                    });
                                    playText(null, null, 'long');
                                });
                                playText(null, null, 'long');
                            });
                            playText(null, null, 'long');
                        });
                        playText(null, null, 'long');
                    });
                    playText(null, null, 'long');
                });
                playText(null, null, 'long');
            }, [`toggleSidebar('id', 'hongatar')`]);
        }

    </script>
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../styles/button.css">
    <link rel="stylesheet" href="../styles/dialog.css">
    <link rel="stylesheet" href="../styles/choices.css">
    <link rel="stylesheet" href="../styles/alert.css">

</body>

</html>