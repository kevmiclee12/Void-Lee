<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Void Lee</title>
</head>

<body>
    <div id="overlay" onClick="finishText()">

        <div class="story" style="background-image: url(../resources/images/backgrounds/new-game.png);" id="story">
        </div>
    </div>

    <!-- //TODO: SOUND -- footsteps crunching on leaves -->

    <script src="../script.js"></script>
    <script>
        window.onload = function () {
            fadeInOverlay();
            const params = new URLSearchParams(window.location.search);
            const fromPaint = params.get('fromPaint');
            const prefix = fromPaint ? `You're full of snot and spit to be ejected like a poet on stage adding to her poem with the consecration of monthly blood play. You want to paint with your own blood. "Ah, to sleep! To dream. To exclaim sighs of relief, to end the waking nightmare of choice and possibility."` : `"Ah, to sleep, perchance to dream."`;
            const lineBreaks = fromPaint ? '^^^^^^^^^^^^^' : '^^^^^^^^^^';
            playAudio('../resources/audio/audiocheck.net_brownnoise.wav', true, true, 0.3)
            createDialogComponent(
                'main1',
                'none',
                `${prefix}^^A great forest towers over you. The ground is layered with pine needles. The stacked needles must be at least 40cm deep! Your progress is slow while you focus on balance.^^Above, the pine trunks creak as they bend into the sky. You gaze at the trees, and the sky beyond it. `,
            );
            playText(0.03, window.innerWidth * 0.8, onEnd => {
                addChoice(`<span style="color: black; font-weight: normal">If you had an ax, you would <a class="choice-button" onClick="increaseStat('athletics', 1); redirect('swing-it.html')">swing it</a></span></br><span style="color: black; font-weight: normal">right at a tree.</span>`, 'main1');
                createDialogComponent(
                    'main2',
                    'none',
                    `${lineBreaks}`
                );
                playText(0.03, window.innerWidth * 0.8, onEnd => {
                    addChoice(`<span style="color: black; font-weight: normal">A group of <a class="choice-button" onClick="redirect('dict-faeries.html')">faeries</a> emerge from the knot of a nearby tree. They circle</span></br><span style="color: black; font-weight: normal">around you, teasing you by plucking at your eyelashes and spitting</span>`, 'main2');
                    createDialogComponent('main3', 'none', `${lineBreaks}^^into your nostrils.`);
                    playText(0.03, window.innerWidth * 0.8, onEnd => {
                        addChoice(`<a class="choice-button" onClick="increaseStat('bluemagic', 1); redirect('follow-the-faeries.html')">Follow the faeries</a>`, 'main3');
                        createDialogComponent('main4', 'none', `${lineBreaks}^^^^`);
                        playText(0.03, window.innerWidth * 0.8, onEnd => {
                            addChoice(`<span style="color: black; font-weight: normal">I should <a class="choice-button" onClick="increaseStat('shitheadedness', 1); redirect('take-a-nap.html')">take a nap</a> on that moss.</span>`, 'main4');
                        }, 'main4');
                    }, 'main3');
                }, 'main2');
            }, 'main1');
        }

        window.onbeforeunload = function () {
            audioElement.pause();
            audioElement.currentTime = 0;
        };


    </script>
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../styles/button.css">
    <link rel="stylesheet" href="../styles/dialog.css">
    <link rel="stylesheet" href="../styles/choices.css">
</body>

</html>